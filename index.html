<html>

<head>
	<meta charset="UTF-8">

	<link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

	<script src="node_modules/jquery/dist/jquery.slim.min.js"></script>
	<script src="node_modules/popper.js/dist/umd/popper.min.js"></script>
	<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="node_modules/p5/lib/p5.min.js"></script>

	<link rel="stylesheet" href="simulator/css/simstyle.css">
	<script type="module" src="simulator/js/simulator.js"></script>

	<title>Simulateur de système logique</title>
</head>

<body>
	<div class="" style="width: 100%; height: 100%; display: flex; align-items:stretch;">
		<div class="list-group" id="leftToolbar"
			style="flex:none; min-width: 50px; max-width: 60px;overflow-y: scroll;display: none;">
			<div
				style="font-size: 80%; font-weight: bold;background-color: lightgray; padding: 1px; word-break: break-all;">
				Entrées/sorties</div>
			<button type="button" tool="LogicInput" title="Entrée" onclick="activeTool(this)"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/LogicInput.svg" class="" width="32">
			</button>
			<button type="button" tool="LogicOutput" title="Sortie" onclick="activeTool(this)"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/LogicOutput.svg" class="" width="32">
			</button>
			<button type="button" tool="NibbleDisplay" title="Affichage de 4 bits" onclick="activeTool(this)"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/NibbleDisplay.svg" class="" width="32">
			</button>
			<button type="button" tool="AsciiDisplay" title="Affichage d’un caractère ASCII" onclick="activeTool(this)"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/AsciiDisplay.svg" class="" width="32">
			</button>
			<button type="button" tool="BarDisplay" title="Affichage d’un bit sous forme de segment lumineux"
				onclick="activeTool(this)" class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/BarDisplay.svg" class="" width="32">
			</button>
			<!-- <button type="button" data-target="#ClockSettings" data-toggle="modal" title="Clock"
						class="list-group-item list-group-item-action ">
						<img src="simulator/img/Clock.svg" width="50">
					</button> -->

			<div
				style="margin-top: 20px;font-size: 80%; font-weight: bold;background-color: lightgray; padding: 1px; word-break: break-all;">
				Portes</div>

			<button type="button" tool="NOT" isGate="true" title="Porte NON" onclick="activeTool(this)"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/NOT.svg" width="50">
				<span class="gate-label">NON</span>
			</button>
			<button type="button" tool="AND" isGate="true" title="Porte ET" onclick="activeTool(this)"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/AND.svg" width="50">
				<span class="gate-label">ET</span>
			</button>
			<button type="button" tool="OR" isGate="true" title="Porte OU" onclick="activeTool(this)"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/OR.svg" width="50">
				<span class="gate-label">OU</span>
			</button>
			<button type="button" tool="XOR" isGate="true" title="Porte OU-X" onclick="activeTool(this)"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/XOR.svg" width="50">
				<span class="gate-label">OU-X</span>
			</button>
			<button type="button" tool="NAND" isGate="true" onclick="activeTool(this)"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/NAND.svg" width="50">
				<span class="gate-label">NON-ET</span>
			</button>
			<button type="button" tool="NOR" isGate="true" onclick="activeTool(this)"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/NOR.svg" width="50">
				<span class="gate-label">NON-OU</span>
			</button>
			<button type="button" tool="XNOR" isGate="true" onclick="activeTool(this)"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<img src="simulator/img/XNOR.svg" width="50">
				<span class="gate-label">NON-OU-X</span>
			</button>

			<button type="button" id="dumpJsonStructure" style="display: none;"
				class="list-group-item list-group-item-action sim-toolbar-button">
				<span class="gate-label">Save to URL &amp; Dump</span>
			</button>


			<!-- <button type="button" data-target="#SR_LatchSettings" title="Latch SR NOR-NAND Sync-Async"
						data-toggle="modal" class="list-group-item list-group-item-action sim-toolbar-button">
						<img src="simulator/img/SR_Latch.svg" width="50">
					</button>
					<button type="button" data-target="#FF_D-TypeSettings" title="Flip Flop D Single or Master-Slave"
						data-toggle="modal" class="list-group-item list-group-item-action sim-toolbar-button">
						<img src="simulator/img/FF_D_MS.svg" width="50">
					</button>
					<button type="button" data-target="#FF_T-TypeSettings"
						title="Flip Flop T Positive-Negative Edge Triggered" data-toggle="modal"
						class="list-group-item list-group-item-action sim-toolbar-button">
						<img src="simulator/img/FF_T.svg" width="50">
					</button>
					<button type="button" data-target="#FF_JK-TypeSettings"
						title="Flip Flop JK Positive-Negative Edge Triggered" data-toggle="modal"
						class="list-group-item list-group-item-action sim-toolbar-button">
						<img src="simulator/img/FF_JK.svg" width="50">
					</button> -->
		</div>
		<div class="" style="flex: auto; position: relative; display: flex; align-items: stretch; min-width: 0;">
			<!-- Simulator Canvas -->
			<div id="canvas-sim" style="flex:auto;">
			</div>

			<!-- In-Canvas Toolbar -->
			<div style="background: rgba(136,136,136,0.5); box-shadow: 0px 0px 10px 1px rgb(201, 201, 201); padding: 5px;
 					position: absolute; top: 10px; right: 10px; border-radius: 5px; visibility: hidden;" id="rightToolbarContainer">
				<div class="btn-group-vertical">
					<button type="button"
						class="btn btn-sm btn-outline-light sim-toolbar-button-right Edit active sim-modification-tool"
						tool="Edit" onclick="activeTool(this)" id="editToolButton"
						title="Compose ou modifie le schéma logique" style="display:none">
						<i class="fa fa-edit"></i>
						Concevoir
					</button>
					<button type="button"
						class="btn btn-sm btn-outline-light sim-toolbar-button-right sim-modification-tool"
						tool="Delete" onclick="activeTool(this)" title="Supprime des éléments du schéma logique"
						style="display:none">
						<i class="fa fa-trash-o"></i>
						Supprimer
					</button>
					<button type="button"
						class="btn btn-sm btn-outline-light sim-toolbar-button-right sim-modification-tool" tool="Move"
						onclick="activeTool(this)" title="Déplace tout le schéma logique" style="display:none">
						<i class="fa fa-arrows"></i>
						Déplacer
					</button>
					<button type="button" class="btn btn-sm btn-outline-light sim-toolbar-button-right" tool="Reset"
						onclick="activeTool(this)" id="resetToolButton"
						title="Réinitialise l’état de ce schéma logique">
						<i class="fa fa-undo"></i>
						Réinitialiser
					</button>
				</div>


			</div>

			<!-- In-Canvas Licence -->
			<!-- <div
				style="padding: 0 6px 3px 0; position: absolute; bottom: 0; right: 0; font-size: 50%; opacity: 0.5; font-style: italic;">
				Basé sur <a href="https://github.com/drendog/Logic-Circuit-Simulator" target="_blank">LCS</a> de <a
					href="https://github.com/drendog" target="_blank">drendog</a>, MIT Licence
			</div> -->
		</div>
	</div>
</body>
<!-- Modal for Clock Settings -->
<div class="modal fade" id="ClockSettings" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Clock Settings</h5>
			</div>
			<div class="modal-body">
				<h6>Clock period</h6>
				<div class="input-group mb-3">
					<input type="number" class="form-control period" value="1000" min="0">
					<div class="input-group-append">
						<span class="input-group-text">ms</span>
					</div>
				</div>
				<h6>Duty Cycle</h6>
				<div class="input-group mb-3">
					<input type="number" class="form-control duty-cycle" value="50" min="0" max="100">
					<div class="input-group-append">
						<span class="input-group-text">%</span>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" tool="Clock" onclick="activeTool(this)"
					data-dismiss="modal">Create</button>
			</div>
		</div>
	</div>
</div>
<!-- End Modal for Clock Settings-->
<!-- Modal for SR Latch Settings -->
<div class="modal fade" id="SR_LatchSettings" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">SR Latch Settings</h5>
			</div>
			<div class="modal-body">
				<h6>Choose SR Latch type</h6>
				<select class="custom-select SR_Latch-gate">
					<option selected>NOR</option>
					<option>NAND</option>
				</select>
				<br>
				<select class="custom-select SR_Latch-sync">
					<option selected>Asynchronous</option>
					<option>Synchronous</option>
				</select>
				<input type="checkbox" class="SR_stabilize" checked>
				<label>Stabilize - Without this, the outputs may pulsate.</label>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" tool="SR_Latch" onclick="activeTool(this)"
					data-dismiss="modal">Create</button>
			</div>
		</div>
	</div>
</div>
<!-- End Modal for SR Latch Settings-->
<!-- Modal for D-Type FF Settings -->
<div class="modal fade" id="FF_D-TypeSettings" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">D-Type Flip-Flop Settings</h5>
			</div>
			<div class="modal-body">
				<h6>Choose the type</h6>
				<select class="custom-select FF_D-Setting">
					<option selected>SINGLE</option>
					<option>MASTER-SLAVE</option>
				</select>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" tool="FF_D" onclick="activeTool(this)"
					data-dismiss="modal">Create</button>
			</div>
		</div>
	</div>
</div>
<!-- End Modal for Clock Settings-->
<!-- Modal for T-Type FF Settings -->
<div class="modal fade" id="FF_T-TypeSettings" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">T-Type Flip-Flop Settings</h5>
			</div>
			<div class="modal-body">
				<h6>Choose the type</h6>
				<select class="custom-select FF_T-Setting">
					<option selected>Positive Edge-Triggered</option>
					<option>Negative Edge-Triggered</option>
				</select>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" tool="FF_T" onclick="activeTool(this)"
					data-dismiss="modal">Create</button>
			</div>
		</div>
	</div>
</div>
<!-- End Modal for T-Type FF Settings-->
<!-- Modal for JK-Type FF Settings -->
<div class="modal fade" id="FF_JK-TypeSettings" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">JK-Type Flip-Flop Settings</h5>
			</div>
			<div class="modal-body">
				<h6>Choose the type</h6>
				<select class="custom-select FF_JK-Setting">
					<option selected>Positive Edge-Triggered</option>
					<option>Negative Edge-Triggered</option>
				</select>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" tool="FF_JK" onclick="activeTool(this)"
					data-dismiss="modal">Create</button>
			</div>
		</div>
	</div>
</div>
<!-- End Modal for JK-Type FF Settings-->

</html>